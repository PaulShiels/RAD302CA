@using Trip_booking.Models;
@model IEnumerable<Trip>

@{
    ViewBag.Title = "Trips";
}



<h2>Trips</h2>

<div class="progress">
    <div class="progress-bar progress-bar-success" style="width: 35%">
        <span class="sr-only">35% Complete (success)</span>
    </div>
    <div class="progress-bar progress-bar-warning" style="width: 20%">
        <span class="sr-only">20% Complete (warning)</span>
    </div>
    <div class="progress-bar progress-bar-danger" style="width: 10%">
        <span class="sr-only">10% Complete (danger)</span>
    </div>
</div>

<div class="row">
    <div class="col-md-7">
        <table class="table table-striped table-hover">
            <tr>
                <th>
                    Trip Name@*@Html.DisplayNameFor(model => model.name)*@
                </th>
                <th>
                    Start Date @*@Html.DisplayNameFor(model => model.startDate)*@
                </th>
                <th>
                    End Date @*@Html.DisplayNameFor(model => model.endDate)*@
                </th>
                <th>
                    Min. Guests @*@Html.DisplayNameFor(model => model.minimumGuests)*@
                </th>
                <th>
                    <p class="btn btn-warning" style="background-color:brown">
                        @Html.ActionLink("Create New Trip", "CreateTrip")
                    </p>
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
{
    <tr onclick="listLegs('@item.tripID');" style="cursor:pointer">
        <td>
            @Html.DisplayFor(modelItem => item.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.startDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.endDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.minimumGuests)
        </td>
        <td>
            <p class="btn btn-danger dropdown-toggle">
                @Html.ActionLink("Add Leg", "AddLegToTrip", new { id = item.tripID })
            </p>
                @*@Html.ActionLink("Edit", "Edit", new { id = item.ID }) |
            @Html.ActionLink("Details", "Details", new { id = item.ID }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.ID })*@
</td>
    </tr>
}

        </table>
    </div>

    <div class="col-md-5">
        <div id="legs"></div>
    </div>
</div>


@section scripts
{
    <script>
        /* Handles listing of Orders when clicking on Customer */
        function listLegs(ID) {
            $.ajax({
                url: '@Url.Action("listLegs")',
                data: { id: ID },
                success: function (data) {
                    $('#legs').html(data);
                   shrinkPageControls();
                }
            });
            $(this).toggleClass('success');
        }
</script>
}
